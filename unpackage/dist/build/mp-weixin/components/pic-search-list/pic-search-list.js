"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/system.js"),o=require("../../api/apis.js");if(!Array){e.resolveComponent("uni-load-more")()}Math;const t={__name:"pic-search-list",props:{keyword:{default:""}},setup(t){let r=e.ref("loading"),n=a.getSystemInfo(),s=e.ref([]),u=1,i=t;async function l(){let e={keyword:i.keyword,pageNum:u,pageSize:9},a=await o.reqSearchAll(e);0==a.errCode&&(a.data.length?(s.value=[...s.value,...a.data],a.data.length<9&&(r.value="noMore")):r.value="noMore")}e.watch((()=>i.keyword),(()=>{r.value="loading",s.value=[],u=1,l()}));return e.onLoad((()=>{l()})),e.onReachBottom((()=>{"noMore"!==r.value&&(u++,l())})),e.onHide((()=>{(async()=>{e.index.setStorage({key:"imageList",data:s.value,success(){},fail(){}})})()})),(a,o)=>e.e({a:e.f(e.unref(s),((e,a,o)=>({a:e.smallPicurl,b:`/pages/detail/detail?currentIndex=${a}`,c:e._id}))),b:"noMore"!=e.unref(r)},"noMore"!=e.unref(r)?{c:e.p({status:e.unref(r),size:"24","icon-type":"auto"})}:{},{d:e.unref(n).bottom},e.unref(n).bottom?{e:e.s(`height:${e.unref(n).bottom}px`)}:{})}},r=e._export_sfc(t,[["__scopeId","data-v-d207d347"]]);wx.createComponent(r);
